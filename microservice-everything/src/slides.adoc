= Microservice everything
Jakub Marchwicki ; @kubem 
:longform:
:sectids!:
:imagesdir: images
:source-highlighter: highlightjs
:language: no-highlight
:dzslides-aspect: 16-9
:dzslides-style: stormy-jm
:dzslides-transition: fade
:dzslides-fonts: family=Yanone+Kaffeesatz:400,700,200,300&family=Cedarville+Cursive
:dzslides-highlight: monokai
:experimental:
:toc2:
:sectanchors:
:idprefix:
:idseparator: -
:icons: font

[.topic]
== Things to cover

[.incremental]
* What is microservice?
* Why bother? 
* Why I cared?
* How I cared?
* Was it worth doing?

[NOTE]
[role="speaker"]
====
* Who am I?
* YDP - Education Publisher. 
** Enterprise architect - co sam nie wiem co znaczy
* Most of examples are from YDP experience
** But not all
* I wasn't actually implementing many of those, unfortunately
* I don't claim this ideas perfect. It was good enough in context
** I'm happy to discuss it and ritualy dissent them
** I'm not my ideas
====


[.topic]
== Agenda

* *What is microservice?*
* Why bother? 
* Why I cared?
* How I cared?
* Was it worth doing?


== ! 
[.statement]
Microservices are the +
[pull-right]#*new black*#

[NOTE]
[role="speaker"]
====
'First of all!'
====

== !

[.middle]
Micro Service is an *architectural concept* that aims to decouple a solution by decomposing functionality into discrete services +
[detail]#with communication over lightweight mechanisms, often an HTTP API#

[NOTE]
[role="speaker"]
====
* this means everything
* maybe a diagram will go better
====

[role="terminal"]
== !

....



       +----------------------------------+                                    
       |                                  |                        ++          
       |  +--------------------+  +----+  |               +---+    ++          
       |  |                    |  |    |  |               |   |                
       |  |                    |  |    |  |               |   |  +--------+    
       |  +--------------------+  |    |  |               +---+  |        |    
       |                          |    |  |                      |        |    
       |  +-----+  +-----+ +---+  |    |  |            +-+       |        |    
       |  |     |  |     | |   |  |    |  |            +-+  +-+  +--------+    
       |  |     |  |     | |   |  |    |  |                 +-+                
       |  +-----+  +-----+ +---+  |    |  |         +----+           +--+      
       |                          |    |  |         |    |  +----+   |  |      
       |  +--------------------+  |    |  |         +----+  |    |   +--+  +--+
       |  |                    |  |    |  |                 |    |         |  |
       |  |                    |  |    |  |            +-+  +----+         +--+
       |  +--------------------+  +----+  |            +-+          +---+      
       |                                  |                         |   |      
       +----------------------------------+                         +---+      
                                                                        
                                                                        
              Monolythic / layered                           Microservice      

....

[NOTE]
[role="speaker"]
====
* We are talking about scattered services, loosely coupled with HTTP calls
====

[.topic]
== My personal definition

[.incremental]
* A small problem domain [detail]#Bounded Content might be the thing#
* Built and deployed by itself [detail]#standalone and isolated#
* Runs in its own process
* Integrates via well-known interfaces + 
[detail]#While HTTP isn’t always the best answer, it’s a damn fine first guess#
* Owns its own data storage [detail]#ultimate goal#

[NOTE]
[role="speaker"]
====
* Obviously much depend on context
** Own data might not always be the case (with legacy systems)
* Lot has been said about decoupled services during this conference
** Reactive, vert.x, dropwizard, etc
** I think tthat gives you a certain feeling what's the buzz
====

[.topic]
== Agenda

* What is microservice?
* *Why bother?*
* Why I cared?
* How I cared?
* Was it worth doing?

[.topic]
== Modularity at all levels

[.incremental]
* Function 
* Object 
* Class 
* Actor 
* Stream transform 
* *Microservice* 

[NOTE]
[role="speaker"]
====
* Pointed out by Martin Odersky at GOTOchicago
* Single Responsibility Principle  taken to an extreme
====


== !
[.statement]
*SOA* done right?

[NOTE]
[role="speaker"]
====
* Is it kind of SOA done right?
* 15 years since the concept of Service Oriented Architecture
* significant changes in the way we think about architecture
** ESB is not always SOA - when the sevices are deeply coupled in a non visible way
====

== !
[.statement]
*Aggregates* and bounded *Contexts* give us a great way of breaking up a domain

[NOTE]
[role="speaker"]
====
* Eric Evan’s - Domain Driven Design
* things evangelised by Slawek Sobotka, Piotr Wyczesany - at least during last two days in here
* Service interface between each context
* ensure a service is responsible for an aggregate root and all of it’s child domain objects
====

== !
[.statement]
*REST* style interfaces and *JSON* as a data interchange

== !
[.statement]
Build *web services* +  
[.pull-right]#easier than ever# 
with *micro frameworks*

[NOTE]
[role="speaker"]
====
* In JAVA world count: 
** Simple embedded Jetty, 
** Spark, Webbit, Dropwizard
** Vert.x, Spring Boot
====

[.topic]
== Agenda

* What is microservice?
* Why bother?
* *Why I cared?*
* How I cared?
* Was it worth doing?

[.topic]
== Some problems with monolythic architecture

[.middle.incremental]
* Even when layered, hidden coupling
* Single runtime, allows in memory calls
* FUD: if it works don't fix it [detail]#don't touch it# 
* Good diagrams not always make it to good code

[NOTE]
[role="speaker"]
====
* I know this might not always be true
** Though it usually happens
====


[.topic]
== The beshitted legacy system 

[.middle.incremental]
* don't touch it approach [detail]#as if you meant it#
* write a small service that does what's needed +
[detail]#instead of diving into legacy system#
* an architecture evolution

[NOTE]
[role="speaker"]
====
* Working with legacy code is risky at best
* We all know it
====

== !
[.small.quote, Fred Brooks, The Mythical Man-Month]
____
Problems of developing software derive from essential complexity and its nonlinear increases with size; leading to difficulty of communication among team members, cost overruns, schedule delays.
____

[NOTE]
[role="speaker"]
====
* If your program get longer, it take more time to develop
* I'm not talking about the *product flaws* it can cause. Leave it out of scope for the time being
* You think you need more people
** But you can't get around by hiring more people
** Because beyond a certain size new hires are actually a net lose
* Keeping things micro is a way for me to limit the size 
====

[role="terminal"]
== !
....
        Legacy system                             
                                                                                      
+------------------------------+                      
|                              |                                 
|   +----------------------+   |                                
|   |                      |   |                               
|   |                      | <-------------------------------------------------------+
|   |                      |   |                              
|   +----------------------+   |                             
|         +       +-------+    |                            
|         |       |       |    |                           
|         |       |       |    |                          
|         |       +-------+    |                         
|         |       +-------+    |                        
|         |       |       |    |                       
|         |       |       |    |                      
|         |       +-------+    |                     
|         |                    |                    
+------------------------------++                  
          |                      
          v                      
+------------------------------+ 
|                              |
|                              | 
|                              |                                                      
+------------------------------+                                                      
                                                                                      
            Database                                                                  
....


[role="terminal"]
== !
....
        Legacy system                                               Proxy             
                                                                                      
+------------------------------+                                   +------+           
|                              |                                   |      |           
|   +----------------------+   |                                   |      |           
|   |                      |   |                                   |      |           
|   |                      | <-------------------------------------------------------+
|   |                      |   |                                   |      |           
|   +----------------------+   |                                   |      |           
|         +       +-------+    |                                   |      |           
|         |       |       |    |                                   |      |           
|         |       |       |    |                                   |      |           
|         |       +-------+    |                                   |      |           
|         |                    |              +-------+            |      |           
|         |                    |              |       |            |      |           
|         |                    |              |       | <----------------------------+
|         |                    |              |       |            |      |           
|         |                    |              +-------+            |      |           
+------------------------------+                  +                +------+           
          |                                       |                                   
          v                                       |                                   
+------------------------------+                  |                                   
|                              |                  |                                   
|                              | <----------------+                                   
|                              |                                                      
+------------------------------+                                                      
                                                                                      
            Database                                                                  
....

[.topic]
== Agenda

* What is microservice?
* Why bother?
* Why I cared?
* *How I cared?*
* Was it worth doing?


[.topic.recap]
== Exibit A

[.statement.pull-right]
a mysterious scoring engine [detail]#-- 2009# 

[role="terminal"]
== !
....

           +-----------------------------------------------+
           |                                               |
           |  +-----------------------------------+        |
           |  |                                   |        |
           |  |          Boundary: SOAP           |        |
           |  |                                   |        |
           |  +-----------------------------------+        |
           |  |                                   |        |
           |  |               EJB                 |        |
           |  |                                   |        |
           |  +-----------------------------------+        |
           |                                               |
           |                                               |
           |  +--------+   +-------+   +----------+        |
           |  |        |   |       |   |          |        |
           |  | JAX-WS |   |  JPA  |   |  DROOLS  |        |
           |  |        |   |       |   |          |        |
           |  +--------+   +-------+   +----------+        |
           |                                               |
           |                                               |
           |                                 JBoss 4.2.x   |
           |                                               |
           +-----------------------------------------------+

....

[.topic]
== Business driver

[.middle]
Webservices are really hard do sale. + 
[pull-right]#*Please visualize it!*#


[role="terminal"]
== !
....

           +-----------------------------------------------+
           |                                               |
           |  +--------------------+--------------+        |
           |  |                    |              |        |
           |  |   Boundary: SOAP   |     JSF      |        |
           |  |                    |              |        |
           |  +--------------------+--------------+        |
           |  |                                   |        |
           |  |               EJB                 |        |
           |  |                                   |        |
           |  +-----------------------------------+        |
           |                                               |
           |                                               |
           |  +--------+   +-------+   +----------+        |
           |  |        |   |       |   |          |        |
           |  | JAX-WS |   |  JPA  |   |  DROOLS  |        |
           |  |        |   |       |   |          |        |
           |  +--------+   +-------+   +----------+        |
           |                                               |
           |                                               |
           |                                 JBoss 4.2.x   |
           |                                               |
           +-----------------------------------------------+

....

[NOTE]
[role="speaker"]
====
* That was the initial approach- which I didn't like
* I personally dislike JSF
* After further discussion with business - the need was for mobile UI
** Primefaces didn't make much sense in such case (remember 2009)
* The app took ages to deploy so the development was hell
** 25 minuts with full caching
** I'm blaming the workstations - but still had to find another way
====

[role="terminal"]
== !

....
    +-----------------------------------------------+                          
    |                                               |                          
    |  +-----------------+-----------------+        |         +---------------+
    |  |                 |                 |        |         |               |
    |  |      SOAP       |  REST endpoint  | <--------------+ |   Dedicated   |
    |  |                 |                 |        |         |    mobile     |
    |  +-----------------+-----------------+        |         |  Single Page  |
    |  |                                   |        |         |  Application  |
    |  |               EJB                 |        |         |               |
    |  |                                   |        |         |               |
    |  +-----------------------------------+        |         +---------------+
    |                                               |                          
    |                                               |                          
    |  +--------+   +-------+   +----------+        |                          
    |  |        |   |       |   |          |        |                          
    |  | JAX+WS |   |  JPA  |   |  DROOLS  |        |                          
    |  |        |   |       |   |          |        |                          
    |  +--------+   +-------+   +----------+        |                          
    |                                               |                          
    |                                               |                          
    |                                 JBoss 4.2.x   |                          
    |                                               |                          
    +-----------------------------------------------+                          

....

[NOTE]
[role="speaker"]
====
* That was simple - write and endpoint, deploy and never come back
* Develop the application externally, independently
* My UI was one service, everything else was another
* That wasn't really a microservice - but it made me think...
====

[.topic.recap.red-border]
== Note to self

[.statement]
Separate things that change with a +
*different pace*

[NOTE]
[role="speaker"]
====
* That was my first outcome
====

[.topic.recap]
== Exibit B

[.statement.pull-right]
sizeable [detail]#2007# image repository [detail]#-- 2012#

[NOTE]
[role="speaker"]
====
* I work in education business with traditional publishers
* our big data are images and movies
* 4TB of data in files & 8GB of data in database
====

[role="terminal"]
== !
     
....
+--------------------------------------+
|                                      |
|         web / controllers            |
|                                      |
+-----------+--------------------------+
            |                           
            | (1)                       
            |                           
            v                           
                                        
+-------------------------------------+ 
|                                     | 
|         application logic           | 
|                                     | 
+--+-------------------------+--------+ 
   |                         |          
   | (2)   ^                 | (4)      
   |       |                 |          
   v       | (3)             v          
           |                            
+----------+--+    +------------------+ 
|             |    |                  | 
|    MySQL    |    |    filesystem    | 
|             |    |                  | 
+-------------+    +------------------+ 
....

[NOTE]
[role="speaker"]
====
* A very simple flow. I'd say simplistic
* That's not much unless:
** The DB is denormalized MySQL
** Files are randomly spread throughout the drive
** Badly designed SQL queries
** Your app is a PHP application
* That was a Structs architecture written in PHP. 
** That didnt stand a test of time
* Initially no caching. That database temp tables
* *And now they want you to make search faster*
** Where you'd rather throw this whole shite away
====

[.topic]
== Business driver

[.middle]
Search is extremelly slow and +
*makes us unproductive*


[.topic.recap.red-border]
== Note to self

[.statement]
The is no such thing as legacy +
If noone use it - abandon it + 
If you can't - it's business as usual + 
[pull-right]#*cope with it!*#

[NOTE]
[role="speaker"]
====
* My second outcome.
* If there was no way to fight them - join them 
====

[role="terminal"]
== !
....
        Proxy                                                                               
                                                                                            
       +-----+                                 +------------------+                         
       |     |         /*                      |                  |                         
+----------------+-------------------------->  |                  |                         
       |     |   |                             |  The Old stuff   |                         
       |     |   |                             |                  +--------+                
       |     |   |                             |                  |        |                
       |     |   |                             +------------------+        |                
       |     |   |                                                         |                
       |     |   |                                                         |  Elastic Search
       |     |   |                                                         |  rivers service
       |     |   |                                                         |                
       |     |   |                                                         |                
       |     |   |                             +------------------+        |                
       |     |   |     /search                 |                  |        |                
       |     |   +-------------------------->  |                  | <------+                
       |     |                                 |  Elastic Search  |                         
       |     |                                 |       index      |                         
       |     |                                 |                  |                         
       +-----+                                 +------------------+                         
....

[NOTE]
[role="speaker"]
====
* That was the idea. 
* The design looked solid
* The project never happened - due to various things

* You can delegate functionality in that way in various projects 
** Semantic search for a legacy portal
** Advanced browsing for asset store
** One-off shot functionalities
* You build it, you cash it, you close it
====

[.topic.recap.red-border]
== Note to self
[.statement]
If you get the mindset +
*everything is a* +
[pull-right]#*service*# +
just not always very micro

[NOTE]
[role="speaker"]
====
* That brings me to another example
* Depending on your definition, what is microservice
** How micro should be the service
** Or size doesnt matter - but responsibility
* If you bound the context, aggregate - is it enough for microservice
====

[.topic.recap]
== Exibit C

[.statement.pull-right]
yet another big ball of mud [detail]#-- 2013#

[.topic]
== A long time ago in a galaxy far, far away

There was this portal with
[.incremental]
* user management and roles [detail]#and identity provisioning#
* ecommerce [detail]#implementing multiple business models#
* assets repository [detail]#with search#
* lessons presentation [detail]#for teacher#
* students assignments


[NOTE]
[role="speaker"]
====
To bring you some context

* A portal where you could buy learing material, present it as school and push it to students to do a home assignment
* Written very very badly, *convoluted* way
* *FAT Controller* was the 'most widespread' design pattern
* Just after *SQL everywhere* from views, through controllers, to models
* Problem was - in some cases it just worked.
** Maybe it also made money
* Implementing a new look and feel was a 20menday project
====

[.topic.recap.red-border]
== Note to self

[.statement]
People are reluctant to *throw away* a multimillion *investment*

[NOTE]
[role="speaker"]
====
* Multimillion - cause that would be capex for many years
* Even though maintenance is extremelly expensive
* It's hard to discuss costs unless you measure. 
** Measuring takes time and you new to polish the turd in the meantime
* It's very often still cheaper than building from scratch
* And who said a green field wouldn't create same big ball of mud
** But is a more hipster language
====

[.topic]
== But we are runnning business here

[.middle]
====
* We many new requirements
* But changes take ages [detail]#and require indepth knowledge#
* The old system needs to stay alive 
* Align with existing architecture? [detail]#no thanks#
====

[NOTE] 
[role="speaker"]
====
* A *keep it working* pattern from *big ball of mud*
* What is more. It's not about throw away and redo
** Evolution is a must
* And in many cases we just don't know the implications
====

[role="terminal"]
== !
....
+-----------------------------------------------------------------+           
|                                                                 |           
|  new user interface                                             |           
|                                                                 |           
+-----------------------------------------------------------------+           
                                                                              
+-----------------------------------------------------------------+           
|                                                                 |           
|  some application logic (Delegation)                            |           
|                                                                 |           
+-----------------------------------------------------------------+           
                                                                              
+----------------+ +----------+         +-----------+   +---------+           
|                | |          |         |           |   |         |           
|   REST wrapper | | Another  |         | Yet       |   |         |           
|                | | wrapper  |         | another   |   |         |           
| +-----------+  | |          |         |           |   |  new    |           
| |           |  | | +----+   |   ...   | +------+  |   |  sexy   |           
| | old stuff |  | | |    |   |         | |      |  |   |  stuff  |           
| |           |  | | |    |   |         | |      |  |   |         |           
| +-----------+  | | +----+   |         | +------+  |   |         |           
|                | |          |         |           |   |         |           
+----------------+ +----------+         +-----------+   +---------+           
....

[NOTE]
[role="speaker"]
====
* What if I take whole application, as-is. Wrap it with a service
** Interface segregation FTW!
* And use it as a not-so-microservice
* We have new responsive UI - big requirement
* Thin controllers that delegate stuff further
** Delegation is afterall underneath all software development
* Initially each "old stuff" was the complete application
====

== !
image::nonsense.jpg[caption="SRSLY??", role="frame"]

[.topic]
== Run this through me again

[.middle.incremental]
* Take the whole application [detail]#for each functionality#
* Write a wrapper for each functionality [detail]#extreme SRP#
* Stabilize the contract [detail]#serve exactly what's needed#
* Automate contract tests
* Scrap what's not required [detail]#from an old stuff#


[.topic.recap.red-border]
== Note to self

[.statement]
Refactor *architecture* with same mindset as *code* 

[NOTE]
[role="speaker"]
====
* In code we Encapsulate Field. Encapsulate functionality with HTTP
* Extract interface. In fact extract webservice contract
* Trust your test suite will catch the errors 

* We are still working with this. *work* or rather refactor *in progress*
====

[.topic.recap]
== Exibit D

[.statement.pull-right]
ActiveX [detail]#from 2002# as a Service [detail]#-- 2014#

[NOTE]
[role="speaker"]
====
* This is a real core. For the true ninjas
====

[role="terminal"]
== !

....

     ++------------++                                                                     
    +-|            |-+                                                                    
+-+----------------+-+-------------------------------------------------------------+-----+
| <-+ | http://some.important.url.com                                              |     |
|     +----------------------------------------------------------------------------+     |
|                                                                                        |
|                                                                                        |
|      +----------------------------+            +-------------------------+             |
|      |                            |            |                         |             |
|      |         UI Component       |            | +--------------------+  |             |
|      |    (Flash / Java Applet)   |            | |                    |  |             |
|      |                            |            | | Active X component |  |             |
|      |                            +--------->  | |                    |  |             |
|      |                            |            | +--------------------+  |             |
|      |    > []    record sound    |  <---------+                         |             |
|      |                            |            |     JavaScript bindings |             |
|      |                            | JavaScript |                         |             |
|      +----------------------------+    magic   +-------------------------+             |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
+----------------------------------------------------------------------------------------+
....

[NOTE]
[role="speaker"]
====
* Imagine situation like this
* Some UI components working together with ActiveX things
* Installed on the browser side
* ActiveX was a C-plus-plus wrapper around C-plus-plus library for sound processing
* Worked fine on Windows / until IE8 - and than stopped
* Few applications were quite heavily dependent on (on the ActiveX API) 
====


[.topic]
== Business driver

[.middle]
Go beyond Internet Explorer 8

[.topic]
== What if's?

[.incremental]
* the same library would work as a service
* it was a REST web service
* there was no C++ web server
* there was no way anyone would write C++
* we used more developer friendly language

[role="terminal"]
== !
....

     ++------------++                                                                        
    +-|            |-+                                                                       
+-+----------------+-+-------------------------------------+--+        +-------------------+
| <-+ | http://some.important.url.com                      |  |        |                   |
|     +----------------------------------------------------+  |        |  +-------------+  |
|                                                             |        |  |             |  |
|    +-----------------------+            +------------+      |        |  | ActiveX     |  |
|    |                       |            |            |      |        |  | components  |  |
|    |      UI Component     |            | JavaScript |      |        |  |             |  |
|    | (Flash / Ja^a Applet) |            | components |      |        |  +-------------+  |
|    |                       |            |            |      |  http  |                   |
|    |                       +--------->  |            +-------------> |  REST webservice  |
|    |                       |            |            |      |        |                   |
|    | ^ []    record sound  |  <---------+            |      |        +-------------------+
|    |                       |            |            |      |                              
|    |                       | JavaScript |            |      |                              
|    +-----------------------+    magic   +------------+      |                              
|                                                             |                              
|                                                             |                              
|                                                             |                              
|                                                             |                              
|                                                             |                              
+-------------------------------------------------------------+                              
....

[NOTE]
[role="speaker"]
====
* Externalized sound component
* Wrapped in Python win32com (as that was purely windows library)
** We were considering node.js native bindings, but went for python
* Wrap the C++ library and expose with REST webservice
** Tornado was the choice
** It's nonblocking I/O was somehow similar to node's idea
* Surprise surprise - it worked
====


[.topic.recap.red-border]
== Note to self

[.statement]
Damn! That was just *crazy* but it *worked*

[.topic]
== Agenda

* What is microservice?
* Why bother?
* Why I cared?
* How I cared?
* *Was it worth doing?*

== !

[.statement]
Still *don't* know

[NOTE]
[role="speaker"]
====
* it's hard to say. architecture decisions does not pay off quickly (usually)
* in some causes that was the only way to go
** The approach (you may argue it was just SOA) help us solve certain problems
* We haven't really touched on operations, deploying small thingies
** In many cases it's a component cased architecture
====


[role="terminal"]
== !

....


       +----------------------------------+                                    
       |                                  |                        ++          
       |  +--------------------+  +----+  |               +---+    ++          
       |  |                    |  |    |  |               |   |                
       |  |                    |  |    |  |               |   |  +--------+    
       |  +--------------------+  |    |  |               +---+  |        |    
       |                          |    |  |                      |        |    
       |  +-----+  +-----+ +---+  |    |  |            +-+       |        |    
       |  |     |  |     | |   |  |    |  |            +-+  +-+  +--------+    
       |  |     |  |     | |   |  |    |  |                 +-+                
       |  +-----+  +-----+ +---+  |    |  |         +----+           +--+      
       |                          |    |  |         |    |  +----+   |  |      
       |  +--------------------+  |    |  |         +----+  |    |   +--+  +--+
       |  |                    |  |    |  |                 |    |         |  |
       |  |                    |  |    |  |            +-+  +----+         +--+
       |  +--------------------+  +----+  |            +-+          +---+      
       |                                  |                         |   |      
       |                                  |                         +---+
       +----------------------------------+                        
                                                                        
                                                                        
              Monolythic / layered                           Microservice      

....


[role="terminal"]
== !

....


       +----------------------------------+      +--------------------------------+                              
       |                                  |      |                 ++             |
       |  +--------------------+  +----+  |      |        +---+    ++             |
       |  |                    |  |    |  |      |        |   |                   |
       |  |                    |  |    |  |      |        |   |  +--------+       |
       |  +--------------------+  |    |  |      |        +---+  |        |       |
       |                          |    |  |      |               |        |       |
       |  +-----+  +-----+ +---+  |    |  |      |     +-+       |        |       |
       |  |     |  |     | |   |  |    |  |      |     +-+  +-+  +--------+       |
       |  |     |  |     | |   |  |    |  |      |          +-+                   |
       |  +-----+  +-----+ +---+  |    |  |      |  +----+           +--+         |
       |                          |    |  |      |  |    |  +----+   |  |         |
       |  +--------------------+  |    |  |      |  +----+  |    |   +--+  +--+   |
       |  |                    |  |    |  |      |          |    |         |  |   |
       |  |                    |  |    |  |      |     +-+  +----+         +--+   |
       |  +--------------------+  +----+  |      |     +-+          +---+         |
       |                                  |      |                  |   |         |
       |                                  |      |                  +---+         |
       +----------------------------------+      +--------------------------------+
                                                                        
                                                                        
              Monolythic / layered                      Something in between 
                                                           (components ?)    

....

[NOTE]
[role="speaker"]
====
* easier to handle by operations
* easier to spoil, couple elements through internal calls
** HTTP is pretty ruthless - you can't bypass
** You can call different component within 
====

== !

[.small.quote, James Lewis]
____
We define *libraries* as components that are linked into a program and called using in-memory calls, while *services* are out-of-process components who communicate with remote procedure calls 
____

[NOTE]
[role="speaker"]
====
* So this might be a problem
** Awareness, code reviews and inspections are important
====


== !

[.small.quote, James Lewis]
____
Microservice applications put a lot of emphasis on *real-time monitoring* of the application, checking both architectural elements and business relevant metrics
____

[NOTE]
[role="speaker"]
====
* Monitoring beyond Naigos
** We are still not very good in it, still learing
* Business metrics are very hard to grasp with *business at the other side of the wall*
====

== !

[.statement]
But we are still *trying*

[.topic.ending, hrole="name"]
== Questions?

[.footer]
[icon-twitter]'{zwsp}' @kubem


[.topic]
== Useful links and some notes

[.middle]
----
http://speakerdeck.com/kubamarchwicki/microservice-everything

Follow me on twitter:
  @kubem

Further reading material on microservices
  http://readlists.com/14bb4629/

Sam Newman - Building Microservices
  http://shop.oreilly.com/product/0636920033158.do

This presentation was made with Asciidoctor
  http://asciidoctor.org/
  https://github.com/kubamarchwicki/presentations/

Tools when preparing this slides
  http://paulrouget.com/dzslides/
  http://asciiflow.com/
----

