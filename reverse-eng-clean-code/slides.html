<!DOCTYPE html><html lang="en" class="aspect-4-3"><head><meta charset="UTF-8" /><meta name="generator" content="Asciidoctor 1.5.1, dzslides backend" /><title>Reverse engineering the clean code</title><meta name="author" content="Jakub Marchwicki" /><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:400,700,200,300&amp;family=Cedarville+Cursive" /><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css" /><link rel="stylesheet" href="./dzslides/themes/highlight/monokai.css" /><link rel="stylesheet" href="./dzslides/themes/style/stormy-jm.css" /><style>section:not(.topic) > h2 { display: none;}</style><link rel="stylesheet" href="./dzslides/core/dzslides.css" /><link rel="stylesheet" href="./dzslides/themes/transition/fade.css" /></head><body><section class="title"><h1>Reverse engineering the clean code</h1><footer><span class="author">Jakub Marchwicki</span><span class="divider">&nbsp;&middot;&nbsp;</span><span class="author">@kubem</span></footer></section><section><img src="images/05-comments.png" alt="05 comments" width="500" />
<details><details open=""><ul><li>I&#8217;d like to tell you a story how I went the path of craftmanship<ul><li>How I went beyond my daily job</li></ul></li><li>Reverse engineering the clean code<ul><li>Not in a way you turn a <em>class</em> file into <em>java</em> file</li><li>In a way Mitnick reversed security through it&#8217;s social aspects</li></ul></li><li>Back in 2008 I was laying down code, best I could - like most people did.</li><li>There better and worse examples. I did was constatly improving.<ul><li>At least that&#8217;s what I tought when I looked back my old code</li></ul></li></ul></details></details></section>
<section><img src="images/06-comments-woohoo.png" alt="06 comments woohoo" width="573" />
<details><details open=""><ul><li>one day I realized there can and must be a beaty in code<ul><li>prolly when I first time compared Calendar API and JodaTime</li><li>or looked up Guava (called Google Collections at that time)</li></ul></li></ul></details></details></section>
<section><figure><img class="frame" src="images/07-wtfs.jpg" alt="07 wtfs" /><figcaption>The Team Building Activity</figcaption></figure>
<details><details open=""><ul><li>I also understood several other things</li><li>Some quite universal metrics</li><li>Now we all know it, regardless of the language</li><li>I think I can always smell the crappy code.</li></ul></details></details></section>
<section><figure><img class="frame" src="images/07a-kalkulator.png" alt="07a kalkulator" /><figcaption>The Refactoring Kata</figcaption></figure>
<details><details open=""><ul><li>And I just though maybe instead of a classical lecture I&#8217;ll do a refactoring kata</li><li>After all - it&#8217;s the first code I&#8217;ve seen with 15k<ul><li>Quite a mountain</li></ul></li><li>And we all have fun from this code, from the approach</li><li>We can spend hours discussing openness of public founded projects etc</li><li>But we also can have a discussion why the program is such a crap<ul><li>Or what would be the implications</li></ul></li></ul></details></details></section>
<section class="topic"><h2>Complex vs complicated</h2><dl class="incremental"><dt>Simple to read, learn and understand</dt><dd>How easy it’s for novice programmer to maintain a significant program</dd><dt>Make stuff simple but not simplistic</dt></dl>
<details><details open=""><ul><li>complex vs complicated – this might be one of the discussion point.</li><li>We can talk verbosity of the language Javy vs. Groovy<ul><li>We can talk ESB looks simple on diagrams</li></ul></li><li>Mythical man-month. Inherent and accidental complexity<ul><li>Or complex vs complicated.</li></ul></li></ul></details></details></section>
<section><figure><img class="frame" src="images/07-clean-code.jpg" alt="07 clean code" /><figcaption>Single source of truth</figcaption></figure>
<details><details open=""><ul><li>So when you get into this thinking, you look for books. I started with this guy</li></ul></details></details></section>
<section><figure><img class="frame" src="images/10-uncle-bob.jpg" alt="10 uncle bob" /><figcaption>Have you met Uncle Bob?</figcaption></figure>
<details><details open=""><ul><li>Now when I think about it, it was definatelly master - apprentice relation</li><li>The rules. <strong>The dogmna</strong>. Variables. Names. Comments</li><li>I realized my craft was improving<ul><li>I felt like I had this rules tatoos at my arm</li></ul></li><li>There were rules</li></ul></details></details></section>
<section class="topic"><h2>Uncle Bob&#8217;s Basics</h2><ul><li>Name variables in such and such way</li></ul></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="java">public static String parse_pliterki(String old_s) {
  StringBuffer old_sb = new StringBuffer(old_s);
  String new_s = "";
  for(int i=0;i&lt;old_sb.length();i++) {
    if((int)old_sb.charAt(i)==260)
      old_sb.replace(i,i+1,"&amp;#260;");
    if((int)old_sb.charAt(i)==261)
      old_sb.replace(i,i+1,"&amp;#261;");
    //...
  }
  new_s += old_sb.toString();
  return new_s;
}</code></pre></div></section>
<section class="topic"><h2>Uncle Bob&#8217;s Basics</h2><ul><li>Name variables in such and such way</li><li>Use comments when suitable and valuable</li></ul></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="java">/*
 * This class represents Customer
 */
public class Customer {

  /*
   * The customer's name
   */
  private String name;

  //....
}</code></pre></div></section>
<section class="topic"><h2>Uncle Bob&#8217;s Basics</h2><ul><li>Name variables in such and such way</li><li>Use comments when suitable and valuable</li><li>Split functions, decompose</li></ul></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="csharp">class Student
{
    private string name;
    private int knowledge;
    private Func&lt;Course, bool&gt; preferences;
    private int experience;

    public void Study()
    {
        knowledge++;
    }

    public void Enlist(IEnumerable&lt;Course&gt; courses)
    {
        // Select appropriate courses and enlist
        foreach (var course in courses.Where(preferences))
            course.Enlist(name);
    }

    public void Work()
    {
        experience++;
    }
}</code></pre></div></section>
<section class="topic"><h2>Uncle Bob&#8217;s Basics</h2><ul><li>Name variables in such and such way</li><li>Use comments when suitable and valuable</li><li>Split functions, decompose</li><li>Use abstractions, symmetry, law of Demeter</li></ul></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="java">TextView v = (TextView)
 ((RelativeLayout)
  ((AbsoluteLayout)
   ((LinearLayout)
    ((RelativeLayout)(
    (LinearLayout)activty.findViewById(R.id.container)).getChildAt(1))
    .getChildAt(0))
   .getChildAt(element))
  .getChildAt(0))
 .getChildAt(0);</code></pre></div></section>
<section class="topic"><h2>Uncle Bob&#8217;s Basics</h2><ul><li>Name variables in such and such way</li><li>Use comments when suitable and valuable</li><li>Split functions, decompose</li><li>Use abstractions, symmetry, law of Demeter</li><li>Test, test, test. Red - green - …</li></ul></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="java">@Test
public class ExampleTest {
  public void testExample() {
    assertTrue(true);
  }
}</code></pre></div></section>
<section><figure><img class="frame" src="images/15-like-a-boss.jpg" alt="15 like a boss" /><figcaption>The SOLID programmer</figcaption></figure>
<details><details open=""><ul><li>Now I know where it&#8217;s comming all from</li><li>You can feel like a boss. Sometimes being a bit superior and dicky</li><li>That might be how you feel when you get all that<ul><li>Or you can dig harder and deeper</li><li>Look for some other inspirations. Go beyond beauty in code, cause it&#8217;s not about beauty</li></ul></li><li>But yet another realization came<ul><li>Do I do this to keep the code maintanable, easier to change</li><li>I kept focus beter</li></ul></li><li>My team mates are more eager to change my code</li><li>I realized clean code wasn&#8217;t on it&#8217;s own. It was a result. <strong>Not the cause</strong></li></ul></details></details></section>
<section><figure><img class="frame" src="images/11-kent-beck.jpg" alt="11 kent beck" /><figcaption>The Sourcerer</figcaption></figure>
<details><details open=""><ul><li>That way I got to Kent Beck</li><li>The clean code was the effect. The cause was somewhere else<ul><li>I know Uncle Bob was ranting about implementation patterns in clean code book. <strong>I don&#8217;t care</strong></li></ul></li><li>Kent has given this different perspective on what was important<ul><li>what the implementation was really about</li></ul></li></ul></details></details></section>
<section class="topic"><h2>Values</h2><ul class="incremental"><li>Code is the communication&#8217;s foundation</li><li>We are one team, team as a whole<ul><li>My shortcuts are not smb&#8217;s else problem</li><li>Whole team&#8217;s problem</li></ul></li><li>Code is read more often then written</li><li>Spend more time maintaining than creating</li></ul></section>
<section class="topic"><h2>Implementation patterns</h2><dl class="incremental"><dt>Communication</dt><dd>Read code like a prose</dd><dt>Simplicity</dt><dd>Be aware of complexity and add when essential</dd><dt>Local consequences</dt><dd>Data and behaviour together</dd></dl></section>
<section class="topic"><h2>Implementation patterns</h2><dl class="incremental"><dt>DRY</dt><dd>minimize repetition</dd><dt>Symmetry</dt><dd>Keep the same level of abstraction</dd></dl></section>
<section><blockquote class="small quote"><p>Clean code is simple and direct. Clean code reads like well-written prose. Clean code never obscures the designers’ intent but rather is full of crisp abstractions and straightforward lines of control.</p><em>Object-Oriented Analysis and Design with Applications</em><br /><cite>Grady Booch</cite></blockquote></section>
<section><figure><img class="frame" src="images/12-loctus.jpg" alt="12 loctus" /><figcaption>The Borg</figcaption></figure>
<details><details open=""><ul><li>Still we ask ourselves a question why are we doing that?</li></ul></details></details></section>
<section><figure><img class="frame" src="images/19-on.jpg" alt="19 on" /><figcaption>prettiness</figcaption></figure></section>
<section><figure><img class="frame" src="images/19-krzeslo.jpg" alt="19 krzeslo" /><figcaption>aesthetics</figcaption></figure></section>
<section><figure><img class="frame" src="images/19-syrena.jpg" alt="19 syrena" /><figcaption>design</figcaption></figure>
<details><details open=""><ul><li>Each of these make you feel different emotions<ul><li>Though all wakes a sense of beauty in you. Because all of those where neatly designed.</li></ul></li><li>It&#8217;s all about what we feel,what happends within our mind when we see such objectes</li><li>Same can happen when working with beautiful code<ul><li>I&#8217;ll get there</li></ul></li></ul></details></details></section>
<section><blockquote><p>For library designers,<br />
the API <strong>is</strong> the UI.</p><em>#JFokus (4   February 2014)</em><br /><cite>Trisha Gee (@trisha_gee)</cite></blockquote>
<details><details open=""><ul><li>Trisha projektowała API do MongoDB, ja Javy - ale nie tylko</li><li>A thesis that API is pretty much like UI - similar principles, similar behvious</li><li>Similar disorientation.</li></ul></details></details></section>
<section class="topic"><h2>Good design communicate</h2><ul class="middle incremental"><li>effectively</li><li>efficiently</li><li>easy to digest</li><li>comfortable to read</li></ul>
<details><details open=""><ul><li>Let&#8217;s get to some basics, some principles<ul><li>Design 101 - for those doing physical design</li><li>not only web pages</li></ul></li><li>seem pretty straightforward</li><li>now eat this!</li></ul></details></details></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="javascript">function vyd_vse1(reg_id,c) {
  for (var j=0; j&lt;tm_regs[reg_id].length; j++)
    document.getElementById(tm_regs[reg_id][j]).checked=c;
  vyd_vse_chk();
}


function vyd_vse2(reg_id) {
  var ffvv=0;
  for (var j=0; j&lt;tm_regs[reg_id].length; j++)
    if (document.getElementById(tm_regs[reg_id][j]).checked!=1) {
      ffvv=1;
      break;
    }

  if (ffvv==0) document.getElementById('reg_'+reg_id).checked=1;
  else document.getElementById('reg_'+reg_id).checked=0;
  vyd_vse_chk();
}</code></pre></div></section>
<section><blockquote><p>What&#8217;s up with all of the long method names these days? So much typing. Good method names read like teenager text messages.</p><em>19 November 2013</em><br /><cite>The Expert Beginner (@ExpertBeginner1)</cite></blockquote></section>
<section><dl><dt>Contrast</dt><dd>grabs attention, relative importance</dd></dl>
<details><details open=""><ul><li>Some practice</li><li>This is really for graphic design, aligning of visual elements</li><li>Kent Beck when talking about implementation patterns he was dscribing it<ul><li>He tackled each and every line of code with lot of</li></ul></li></ul></details></details></section>
<section><img class="frame" src="images/16-contrast.png" alt="16 contrast" /></section>
<section><dl><dt>Contrast</dt><dd>grabs attention, relative importance</dd><dt>Repetition</dt><dd>attach meaning to the new element</dd></dl></section>
<section><img class="frame" src="images/16-repetition.png" alt="16 repetition" /></section>
<section><dl><dt>Contrast</dt><dd>grabs attention, relative importance</dd><dt>Repetition</dt><dd>attach meaning to the new element</dd><dt>Alignment</dt><dd>Keeping same things together</dd></dl></section>
<section><img class="frame noframe" src="images/16-alignment.png" alt="16 alignment" /></section>
<section><dl><dt>Contrast</dt><dd>grabs attention, relative importance</dd><dt>Repetition</dt><dd>attach meaning to the new element</dd><dt>Alignment</dt><dd>Keeping same things together</dd><dt>Proximity</dt><dd>not very far away from each other</dd></dl></section>
<section><img class="frame" src="images/16-proximity.png" alt="16 proximity" /></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="java">Car car = Car.builder(Color.WHITE, 500)
  .withSunroof()
  .modelName("Mustang")
  .createCar();</code></pre></div>
<details><details open=""><ul><li>Fluid Builder pattern can by itself be a nice example</li></ul></details></details></section>
<section class="topic"><h2>Let&#8217;s recap</h2><p class="statement">piece of <strong>CRAP</strong> design</p>
<details><details open=""><ul><li>We subconsciously feel aesthetics, feel something is not right with the code</li><li>There are rules - however it&#8217;s not about remembering some juicy buzzwords<ul><li>We use them, adhere etc</li></ul></li><li>It&#8217;s not that somebody created a mem and now we design like this</li><li>The mem was coming from somewhere, from some studies and researches</li></ul></details></details></section>
<section><figure><img class="stretch-x" src="images/20-pudelko.jpg" alt="20 pudelko" /><figcaption>Let's talk design, like real design</figcaption></figure>
<details><details open=""><ul><li>Sometimes research is about a box</li><li>We see a box and we build a mental model around that, in our mind.</li><li>Take this box<ul><li>We can lift it, shake it, open, look inside, put something inside</li></ul></li></ul></details></details></section>
<section class="topic"><h2>Affordance</h2><div class="exampleblock"><div class="content"><blockquote class="small quote"><p>a <strong>quality</strong> of an <strong>object</strong>, which <strong>allows</strong> an individual <strong>to perform an action</strong>. For example, a knob affords twisting, and perhaps pushing, while a cord affords pulling</p></blockquote></div></div></section>
<section><figure><img class="frame" src="images/21-affordance.jpg" alt="21 affordance" /><figcaption>affordance for dummies</figcaption></figure>
<details><details open=""><ul><li>This plate,this knob suggest an action<ul><li>These suggestions are called signifiers</li></ul></li><li>A wiecie że kod także ma swoją afordancję.</li><li>Ma swoją naturę która sugeruje nam pewne konkretne akcje które możemy wykonać. To się nazywa signifierami.</li></ul></details></details></section>
<section><figure><img class="stretch-x" src="images/21-design-of-everyday-things.jpg" alt="21 design of everyday things" /><figcaption></figcaption></figure>
<details><details open=""><ul><li>These terms were coined by Don Norman<ul><li>In this book "the design of everyday things"</li></ul></li><li>So now, think not only about physical objects.</li><li>Zobaczcie np taki przedmiot. Jaką akcję możemy na nim wykonać. Nalać wrzątku.<ul><li>Jak złapać – widzimy. A co potem? – nie przypomina Wam to czegoś</li></ul></li></ul></details></details></section>
<section><figure><img class="frame" src="images/22-drzwi-jedi.png" alt="22 drzwi jedi" /><figcaption>Only for Jedi</figcaption></figure>
<details><details open=""><ul><li>How it works - we see it on daily basis</li></ul></details></details></section>
<section><img src="images/24-android1.png" alt="24 android1" width="300" />
<details><details open=""><ul><li>Not only among phisical objects, also in IT<ul><li>See Android. It&#8217;s after all fairly easy to bash about</li></ul></li><li>See this box. It has slider, which suggests an action.<ul><li>But at the same time it&#8217;s a button. WTF??</li></ul></li></ul></details></details></section>
<section><img src="images/24-android1.png" alt="24 android1" width="300" />
<img class="pull-right" src="images/24-android2.png" alt="24 android2" width="287" />
<details><details open=""><ul><li>Yeah. That was funny, but how it works with code?<ul><li>Has it&#8217;s nature this suggests us certain actions we can or should perform.</li></ul></li></ul></details></details></section>
<section><figure><img class="frame" src="images/13-functions2.png" alt="13 functions2" /><figcaption>Why? Oh Why?</figcaption></figure></section>
<section class="source"><div class="listingblock"><div class="title">BadBadSql.java</div><pre class="highlight"><code class="java">public class Sql {

   public Sql(String table, Column[] columns)
   public String create()
   public String insert(Object[] fields)
   public String selectAll()
   public String fieldByKey(
	String keyColumn, String keyValue)
   private String ColumnList(Column[] columns)
   private String valuesList(
	Object[] fields, final Column[] columns)

}</code></pre></div>
<details><details open=""><ul><li>So what&#8217;s wrong here? Many<ul><li>Many responsibilities, too many</li><li>Open Closed principle</li><li>All our changes are pretty invasive</li></ul></li></ul></details></details></section>
<section class="source"><div class="listingblock"><pre class="highlight"><code class="java">abstract public class Sql {
   public Sql(String table, Column[] columns)
   abstract public String generate();
}

public class CreateSql extends Sql {
   public CreateSql(String table, Column[] columns)
   @Override public String generate()
}

public class SelectSql extends Sql {
   public SelectSql(String table, Column[] columns)
   @Override public String generate()
}

public class InsertSql extends Sql {
   public InsertSql(String table, Column[] columns)
   @Override public String generate()
   private String valuesList(Object[] fields, final Column[] columns)
}

public class FindKeyBySql extends Sql {
   public FindKeyBySql(String table, Column[] columns, String keyColumn, String keyValue)
   @Override public String generate()
}</code></pre></div>
<details><details open=""><p>Now take this example</p>
<ul><li>mental model: what model you build when you see this code</li><li>affordance: what actions does this code allow you to do</li><li>signifiers: or more, what it suggests</li></ul></details></details></section>
<section><figure><img class="frame" src="images/26-george-miller.jpg" alt="26 george miller" /><figcaption>George Miller</figcaption></figure>
<details><details open=""><ul><li>Ok – wiemy już coś o estetyce, o dobrze zaprojektowanym czymś – ale przejdźmy dalej.</li><li>1956 by the cognitive psychologist George A. Miller</li><li>The Magical Number Seven, Plus or Minus Two: Some Limits on Our Capacity for Processing Information</li></ul></details></details></section>
<section><img class="frame" src="images/27-liczydlo.jpg" alt="27 liczydlo" />
<details><details open=""><ul><li>Znowu temat na topic, temat wyborczy</li><li>Pamięć ludzka może przechować do 7+/- 2 elementów w swojej pamięci krótkotrwałej. Widzimy do wszędzie – nawet w ruskim liczydle.</li><li>Policzono: 1-3 obiekty: 40 nano sekuns</li><li>Jeżeli więcej to 250ns na każdy kolejny. Czyli policzenie do 4 to w zasadzie ¼ sedunku. Kolejne 4 – kolejna ¼</li></ul></details></details></section>
<section class="topic"><h2>But we are cutting some code here&#8230;&#8203;</h2><ul class="middle"><li>number of method parameters</li><li>function / class size</li><li>external API method names</li><li>readable &amp; descriptive naming</li></ul>
<details><details open=""><ul><li>Stosujemy w programowaniu aby nie zaśmiecać sobie głowy</li></ul></details></details></section>
<section class="topic"><h2>Multistore memmory model</h2><img src="images/29-multistore-model.png" alt="29 multistore model" />
<details><details open=""><ul><li>Pamięć sensoryczna: na ¼ sekundy</li><li>Pamięć krótkotrwała: do okolo 20 sek (7+/- 2 rzeczy)</li><li>Pamięć długotrwała: bez ograniczeń – ale wymaga nauki</li><li>Próg wejścia w kod, zrozumienia abstakcji.</li></ul></details></details></section>
<section class="topic"><h2>The flow</h2><img src="images/30-flow.png" alt="30 flow" height="450" />
<details><details open=""><ul><li>Mihaly Csikszentmigalyi</li><li>Opisał on stan pełnego zanurzenia w jakiejś czynności (full immersion, involvement and angement) – nazwał to the flow</li><li>Projetanci mówią np. o procesie szukania (google search).</li><li>Programiści: refaktoring, połączony z TDD, cykl: red green refactor. Albo code deploy check</li></ul></details></details></section>
<section class="topic"><h2>Beyond design 101</h2><p class="statement">We can <strong>help</strong> ourselves<br />
and be more <strong>effective</strong></p>
<details><details open=""><ul><li>To teraz zastanówcie się, obserwujcie siebie jak działaliście gdy robiliście pulla do dobrze napisanego open sourcea</li><li>Albo mieliście grzebać w legacy crap gdzie w każdym miejscu ziało frustracją.</li><li>To teraz pomyślcie o sobie za pół roku z kodem który właście tworzycie. Jak chcecie się czuć. Decyzja jest wasza.</li></ul></details></details></section>
<section><figure><img class="frame" src="images/25-bruce-lee.png" alt="25 bruce lee" /><figcaption>守破離</figcaption></figure>
<details><details open=""><ul><li>Coding is only a part of you job</li><li>Lots of things are beyond coding<ul><li>Communication, aesthetics, desgn, psychology</li></ul></li><li>Be like Bruce Lee, who started with Kung Fu and ended with Karate<ul><li>Actually this term is coined by a friend of mine</li><li>Michał Bartyzel, who was talking yesterday about communication and conversation patterns</li></ul></li><li>Go for Eames - The architect or Normand Design of everyday things</li><li>Shu – dogma. Adherence</li><li>Ha – bending rules</li><li>Ri – transcendence. We just know what to do and why.</li></ul></details></details></section>
<section class="topic ending"><h2 class="name">Thank you!</h2><p class="footer">[icon-twitter]'&#8203;' @kubem</p></section>
<section class="topic"><h2>Links and other goodies</h2><div class="listingblock"><pre>https://speakerdeck.com/kubamarchwicki
      /reverse-engineering-the-clean-code

Follow me on twitter
  @kubem

This presentation was made with AsciiDoctor
  http://asciidoctor.org/
  https://github.com/kubamarchwicki/presentations/</pre></div></section><script src="./dzslides/core/dzslides.js"></script><script src="./dzslides/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script></body></html>