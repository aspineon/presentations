<!DOCTYPE html><html lang="en" class="aspect-4-3"><head><meta charset="UTF-8"><meta name="generator" content="Asciidoctor 0.1.4, dzslides backend"><title>JEE&#8217;ish development without hassle</title><meta name="author" content="Jakub Marchwicki"><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic&amp;subset=latin,latin-ext&amp;family=Cedarville+Cursive"><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css"><link rel="stylesheet" href="./dzslides/themes/highlight/tomorrow.css"><link rel="stylesheet" href="./dzslides/themes/style/stormy-jm.css"><style>section:not(.topic) > h2 { display: none;}</style><link rel="stylesheet" href="./dzslides/core/dzslides.css"><link rel="stylesheet" href="./dzslides/themes/transition/fade.css"></head><body><section class="title"><h1>JEE&#8217;ish development without hassle</h1><footer><span class="author">Jakub Marchwicki</span><span class="divider">&nbsp;&middot;&nbsp;</span><span class="author">@kubem</span></footer></section><section><figure><img class="frame" src="images/karty-java.png" alt="karty java"><figcaption>Java Developer archetype</figcaption></figure>
<details><details open=""><ul><li>Well, that doesn&#8217;t surprise me<ul><li>I&#8217;ve recently met a company that was bragging about embracing annotation in their code</li><li>SRSLY! it&#8217;s 2014. Java5 EOL was in October 2009</li></ul></li><li>This is a sad life of software engineer.</li></ul></details></details></section>
<section><figure><img class="frame-right" src="images/karty-ios.png" alt="karty ios"><figcaption>Java Developer archetype</figcaption></figure>
<details><details open=""><ul><li>I pewnie wielu z nas marzy się taka hipsterska praca<ul><li>Do some haskell coding, or swift</li><li>Or at least some closures</li></ul></li><li>But the reality is EJB 3.0 (if we are lucky)</li></ul></details></details></section>
<section><figure><img class="frame" src="images/git_log.png" alt="git log"><figcaption>Standard corporate project</figcaption></figure>
<details><details open=""><ul><li>Have a look on the commit dates</li><li>I wonder if anybody have hope for their new greenfield project</li><li>This is a project which existed before you joined the company and will be there
log after your leave</li><li>So&#8230; you ended up joining such a project</li></ul></details></details></section>
<section class="topic"><h2>Every project has some principles</h2><dl class="incremental scatter"><dt>JEE == EJB</dt><dd>cause we do EJB</dd><dt>Spring Framework</dt><dd>we are lightweight, with 60MB war</dd><dt>JPA</dt><dd>object map everything</dd></dl>
<details><details open=""><ul><li>Monkey and bannanas experiment</li><li>Spring Framework was lightweight w 2006<ul><li>JEE6 was marketed as Spring alternative, cause spring become too heavy</li><li>Cause 80% of applications it was ORM + DI + View Components (JPA + EJB + JSF, JPA + Spring + Spring MVC)</li></ul></li><li>JPA - map everything as objects. Event if it doen&#8217;t make sense (raporting)</li><li>I don&#8217;t want to say these assumptions are wrong. They are wonderful, in certain contexts<ul><li>However, aligning with them causes us not to think about context</li><li>Met a company you made their own hibernate-special-dao for some project few years ago<ul><li>They still use it even though spring-data does pretty much the same</li></ul></li></ul></li></ul></details></details></section>
<section><blockquote><p>Insanity is doing the same thing over and over again and expecting different results.</p><br><cite>Albert Einstein</cite></blockquote>
<details><details open=""><ul><li>still, whatever requirement comes over we use the same hammer<ul><li>over and over again</li></ul></li></ul></details></details></section>
<section><blockquote><p>There is no process that cannot be improved (&#8230;) The never-ending continuous
improvement process (&#8230;)</p><em>Lean Software Development</em><br><cite>Mary Poppendieck</cite></blockquote>
<details><details open=""><ul><li>Python approach - one best way to do things vs Perl approach - many ways to do thing</li><li>we don&#8217;t have such constraint in Java</li><li>Strange side projects<ul><li>Mobile, responsive frontend for webservices layer</li><li>Temporary eshop for photos and assets repository</li><li>Automation of some processes</li><li>Additional thingies which make human based processes more effective</li></ul></li><li>Whenever on the project, I remember having such "opportunity"</li></ul></details></details></section>
<section><figure><img class="frame" src="images/todo_tweet.png" alt="todo tweet"><figcaption>Let's build a TODO application</figcaption></figure>
<details><details open=""><ul><li>So to run it by example</li><li>There is not much of philosophy in here.<ul><li>Just ordinary everyday stuff</li><li>It allows to focus on certain things</li></ul></li><li>So what can we do with such a surprise /side in a project</li><li>I&#8217;ll use an example of such side project: TodoMVC<ul><li>Because we all know Todo application is an ultimate goal for everything</li><li>And number 42</li></ul></li></ul></details></details></section>
<section class="topic"><h2>What&#8217;s the project about?</h2><ul><li>Database <span class="detail">MySQL seem good enough</span></li><li>Data access <span class="detail"><strong>get the data</strong></span></li><li>Business logic <span class="detail">anemic CRUD</span></li><li>A controller <span class="detail"><strong>in a few different ways</strong></span></li><li>Views <span class="detail">backbone.js</span></li></ul>
<details><details open=""><ul><li>we tend to use exactly the same tools as always</li><li>if we have an JEE application, any web-related stuff is done in JSF</li><li>situation I had with web view for webservices<ul><li>shang bang - we got JSF</li></ul></li><li>So we again are unhappy with choices, as always<ul><li>but haven&#8217;t done much to change it</li></ul></li></ul></details></details></section>
<section class="topic"><h2>So what&#8217;s the crack?</h2><p class="statement"><span class="detail">IDE</span><br>
IDE<br>
<strong>IDE</strong> &#8594; <span class="detail">alt + tab</span></p></section>
<section><div class="listingblock"><div class="title"><code>TodoMVCResource.java</code></div><pre class="highlight"><code class="java">@Path("/")
@Produces(MediaType.APPLICATION_JSON)
public class TodoMVCResource {

    private final Store store;

    @GET
    public List&lt;Todo&gt; getAll() {
        return store.getAll();
    }

    //..
    //methods omitted for brevity
}</code></pre></div>
<div class="listingblock"><div class="title"><code>runner.sh</code></div><pre class="highlight"><code class="bash">{ ~ } » java -jar tomee-embedded.jar --path my-application.war</code></pre></div>
<details><details open=""><ul><li>This is how it might have looked like with JEE</li><li>+ adding just small pom.xml dependency<ul><li>two to be precise</li></ul></li></ul></details></details></section>
<section><div class="listingblock"><div class="title"><code>TodoMVCController.java</code></div><pre class="highlight"><code class="java">@RestController
public class TodoMVCController {

    private final Store store;

    @Autowired
    public TodoMVCController(Store store) {
        this.store = store;
    }

    @RequestMapping(value = "/todos",
            method = RequestMethod.GET,
            produces = MediaType.APPLICATION_JSON_VALUE)
    public List&lt;Todo&gt; getAllTodos() {
        return store.getAll();
    }

    //..
}</code></pre></div>
<details><details open=""><ul><li>And that would have been Spring</li><li>It looks legic - we got a single jar</li><li>Nearly microservise</li><li>Fair chance we havent touched the original application<ul><li>Which is quite important. Especially when you work with legacy</li></ul></li><li>Have a look into the <strong>IDE</strong></li><li>IDE IDE IDE IDE (boot configuration, spring  data - automagic)</li></ul></details></details></section>
<section><p class="statement middle">Seem <strong>legit?</strong></p>
<details><details open=""><ul><li>Spring did the job for me</li><li>Am I a happy deveoper?<ul><li>I can go and play xbox, fusbal</li></ul></li><li>I don&#8217;t want to rant about using JEE, Spring<ul><li>But these framework tend to do things for you, which make a developer lazy</li><li>And all together; we don&#8217;t need a lawnmower to handle 1m^2 of grass</li></ul></li></ul></details></details></section>
<section><ul class="incremental"><li>Servlet <span class="detail">starting point</span></li><li>Response Mapping <span class="detail">Jackson / Jettison</span></li><li>Dispatcher <span class="detail">Spring</span> / Container <span class="detail">JEE</span></li><li>Dependency Container <span class="detail">Spring / CDI</span></li><li>TransactionManager</li><li>ORM (EntityManager)</li><li>ResultSet <span class="detail">JDBC</span></li><li>DataSource</li><li>SQL</li></ul>
<details><details open=""><ul><li>Let&#8217;s have a look what Spring Boot / Data or TomEE did for us? <strong>What&#8217;s under the hood</strong></li><li>Some layers that are implicit, not always needed</li><li>Can we get closer to the <strong>bare metal</strong>?<ul><li>So that in case of exception we know what&#8217;s the crack no need to google it</li><li>Close to http i SQL (cause that&#8217;s the technology we are using)</li></ul></li></ul></details></details></section>
<section><figure><img class="frame" src="images/geek_poke_layers.jpeg" alt="geek poke layers"><figcaption>Layers. Onions have layers...</figcaption></figure></section>
<section><ul><li><strong>Servlet</strong> <span class="detail">starting point</span></li><li><strong>Response Mapping</strong> <span class="detail">Jackson / Jettison</span></li><li>Dispatcher <span class="detail">Spring</span> / Container <span class="detail">JEE</span></li><li>Dependency Container <span class="detail">Spring / CDI</span></li><li>TransactionManager</li><li>ORM (EntityManager)</li><li><strong>ResultSet</strong> <span class="detail">JDBC</span></li><li><strong>DataSource</strong></li><li><strong>SQL</strong></li></ul>
<details><details open=""><ul><li>And what we actually need in this simplistic application?</li><li>50% is a cargo cult. Overengineering</li><li>Can it be done easier? more robust?</li></ul></details></details></section>
<section class="topic"><h2>More robust?</h2><ul class="middle incremental"><li>Dropwizard <span class="detail">Jetty + Jersey + jDBI</span></li><li>Jetty + Sql2o</li><li>Jetty + RESTeasy + MyBatis</li><li>Spark + jOOQ</li><li>Webbit + jDBI</li></ul>
<details><details open=""><ul><li>My intention is not to cover the frameworks in details<ul><li>Touch the subject - due to time</li><li>Honestly, I don&#8217;t know all the details as well</li><li>So if you used that on a project - you prolly know more than I do</li><li>But framework is not the goal</li></ul></li><li>It&#8217;s about approach<ul><li>Libraries over frameworks.</li></ul></li></ul></details></details></section>
<section><ul class="middle"><li><strong>Dropwizard</strong> <span class="detail">Jetty + Jersey + jDBI</span></li><li>Jetty + Sql2o</li><li>Jetty + RESTeasy + MyBatis</li><li>Spark + jOOQ</li><li>Webbit + jDBI</li></ul></section>
<section><dl><dt>Dropwizard</dt><dd>Dropwizard is a Java framework for developing ops-friendly, high-performance, RESTful web services.<br>
Dropwizard pulls together stable, mature libraries from the Java ecosystem into a simple, light-weight package that lets you focus on getting things done.</dd></dl>
<details><details open=""><ul><li>A bit of marketing jargon</li><li>Dropwizard started as an extra-simple non framewor</li><li>It was originated for linkedin. Simlar as webbit was originated for DRW Trading<ul><li>There was a big change between 0.6 and 0.7. Quite a lot has been added to address everybody&#8217;s needs</li><li>It was no longer maintained by codahale - the original author</li></ul></li><li>I&#8217;ll focus on Jetty + Jersey + jDBI<ul><li>dropwizard gives nice plumbing i API for many internal objects</li><li>allows automagic hook for container&#8217;s api - which simplifies many things<ul><li>For example: Menaged Resources (Managed Objects for database access)</li></ul></li><li>I won&#8217;t cover neaty gritty details - afterall it&#8217;s quite popular framework</li></ul></li></ul></details></details></section>
<section><ul class="middle"><li>Dropwizard <span class="detail">Jetty + Jersey + jDBI</span></li><li><strong>Jetty + Sql2o</strong></li><li>Jetty + RESTeasy + MyBatis</li><li>Spark + jOOQ</li><li>Webbit + jDBI</li></ul></section>
<section><dl><dt>Jetty</dt><dd>Small footprint web server and javax.servlet container</dd><dt>Sql2o</dt><dd>Sql2o is a small java framework that makes it easy to execute sql statements on your JDBC compliant database from java.</dd></dl>
<details><details open=""><ul><li>So while Jetty is quite straight forward, Sql2o seem wierd</li><li>IDE IDE IDE IDE</li><li>Have you evered wondered about performance of each db access library.</li></ul></details></details></section>
<section><table class="tableblock frame-all grid-all" style="width: 100%"><colgroup><col style="width: 50%"><col style="width: 50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Method</th><th class="tableblock halign-left valign-top">Duration</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Hand coded <code>ResultSet</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">60ms</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Sql2o</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">75ms <span class="detail">(25% slower)</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Apache DbUtils</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">98ms <span class="detail">(63% slower)</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">JDBI</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">197ms <span class="detail">(228% slower)</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">MyBatis</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">293ms <span class="detail">(388% slower)</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">jOOQ</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">447ms <span class="detail">(645% slower)</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Hibernate</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">494ms <span class="detail">(723% slower)</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Spring JdbcTemplate</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">636ms <span class="detail">(960% slower)</span></p></td></tr></tbody></table>
<div class="listingblock"><pre>sql2o/PojoPerformanceTest.java --&gt; http://goo.gl/cwNkRN</pre></div>
<details><details open=""><ul><li>1000 SELECT statements against a DB and map the data returned to a POJO</li><li>Of course we can discuss methodology - which is good</li><li>Besides the peformance increase we have one other thing<ul><li>if something happens we exactly know where it happended and why.</li></ul></li></ul></details></details></section>
<section><ul class="middle"><li>Dropwizard <span class="detail">Jetty + Jersey + jDBI</span></li><li>Jetty + Sql2o</li><li><strong>Jetty + RESTeasy + MyBatis</strong></li><li>Spark + jOOQ</li><li>Webbit + jDBI</li></ul></section>
<section><dl><dt>RESTeasy</dt><dd>RESTEasy is a JBoss project that provides various frameworks to help you build RESTful Web Services and RESTful Java applications</dd><dt>MyBatis</dt><dd>MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings</dd></dl>
<details><details open=""><ul><li>RESTeasy is fairly well known, but myBatis might be a bit hipster&#8217;ish</li><li>With  sql2o we kept SQL statements in code, which is generally considered a bad practice<ul><li>myBatis "externalize them" in a single place (XML or annotation based interface)</li></ul></li><li>Most important point is to consciously make a decision which abstraction to use</li></ul></details></details></section>
<section><ul class="middle"><li>Dropwizard <span class="detail">Jetty + Jersey + jDBI</span></li><li>Jetty + Sql2o</li><li>Jetty + RESTeasy + MyBatis</li><li><strong>Spark + jOOQ</strong></li><li>Webbit + jDBI</li></ul></section>
<section><dl><dt>Spark</dt><dd>A Sinatra inspired micro web framework for quickly creating web applications in Java with minimal effort</dd><dt>jOOQ</dt><dd>jOOQ generates Java code from your database and lets you build typesafe SQL queries through its fluent API</dd></dl></section>
<section><ul class="middle"><li>Dropwizard <span class="detail">Jetty + Jersey + jDBI</span></li><li>Jetty + Sql2o</li><li>Jetty + RESTeasy + MyBatis</li><li>Spark + jOOQ</li><li><strong>Webbit + jDBI</strong></li></ul></section>
<section><dl><dt>Webbit</dt><dd>An event-based, single threaded WebSocket and HTTP server in Java</dd><dt>jDBI</dt><dd>jDBI is a SQL convenience library for Java. It attempts to expose relational database access in idiommatic Java, using collections, beans, and so on, while maintaining the same level of detail as JDBC. It exposes two different style APIs, a fluent style and a sql object style.</dd></dl>
<details><details open=""><ul><li>webbit - uses netty<ul><li>similarity with node.js is more than sure</li><li>most of such ultra-fast things were made for trading companies</li><li>DRW trading tego od Dana Northa i Joe Walesa</li></ul></li><li>mentioning vert.x sound like a must - be we run out of time<ul><li>I&#8217;ll put it out of scope</li></ul></li></ul></details></details></section>
<section class="topic"><h2>Instead of wrap-up</h2><p class="statement"><strong>Why</strong> bother?</p>
<details><details open=""><ul><li>Marry Poppendieck was talking <em>Sharpening the Saw</em><ul><li>We practice when it&#8217;s fairly safe</li></ul></li><li>There was a great video, lecture about innovation by John Cleese<ul><li>Space (separeted),</li><li>Time (for certain amout of time, timeboxed),</li><li>Time (to get creative, not operational),</li><li>confidence (small chunk, we can get to Spring back), Fun (why, because we can ad we are nerds)</li></ul></li><li>We try to understand the nature of the thing, not to do what always was done<ul><li>Like no dependecy injection, bacause wasn&#8217;t needed</li><li>It&#8217;s a bit like between engineer and code. After coputer science and programming cource</li></ul></li></ul></details></details></section>
<section><figure><img class="frame" src="images/mosquito_hunters.png" alt="mosquito hunters"><figcaption></figcaption></figure>
<details><details open=""><ul><li>Thing to remember<ul><li>Don&#8217;t be a mosquito hunter. You don&#8217;t need a rocket launcher</li><li>Though it might be fun</li></ul></li><li>No need for lawn mower to cut 2m^2 of grass</li></ul></details></details></section>
<section class="topic ending"><h2 class="name">Questions?</h2><p class="footer"><em class="icon-twitter">&#8203;</em> @kubem</p></section>
<section class="topic"><h2>Links and other goodies</h2><div class="listingblock"><pre>http://speakerdeck.com/kubamarchwicki/jee-without-hassle

Follow me on twitter
  @kubem

Project with examples
  https://github.com/kubamarchwicki/micro-java
  Frontend from here: https://github.com/tastejs/todomvc
  Some inspirations: https://github.com/kouphax/todomvc-server

This presentation was made with AsciiDoctor
  http://asciidoctor.org/
  https://github.com/kubamarchwicki/presentations/

Web
  http://www.eclipse.org/jetty/
  http://resteasy.jboss.org/
  http://www.sparkjava.com/
  http://webbitserver.org/
  http://dropwizard.io/

Database
  http://sql2o.org/
  http://mybatis.github.io/mybatis-3/
  http://jooq.org/
  http://jdbi.org/
  http://www.hibernate-alternative.com/</pre></div></section><script src="./dzslides/core/dzslides.js"></script><script src="./dzslides/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script></body></html>